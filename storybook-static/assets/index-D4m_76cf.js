var N=h=>{throw TypeError(h)};var $=(h,i,e)=>i.has(h)||N("Cannot "+e);var t=(h,i,e)=>($(h,i,"read from private field"),e?e.call(h):i.get(h)),c=(h,i,e)=>i.has(h)?N("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(h):i.set(h,e),n=(h,i,e,s)=>($(h,i,"write to private field"),s?s.call(h,e):i.set(h,e),e),l=(h,i,e)=>($(h,i,"access private method"),e);var A,w,T,C,g;class j{constructor(i,e){c(this,A);c(this,w);c(this,T);c(this,C);c(this,g);const{elLen:s=0,dividerLen:r=0,maxTextLen:f=0,maxChLen:L=0}=e??{};n(this,A,s),n(this,w,r),n(this,T,f),n(this,C,L),n(this,g,i)}get elLen(){return t(this,A)}set elLen(i){i!==t(this,A)&&(n(this,A,i),t(this,g).call(this,this))}get dividerLen(){return t(this,w)}set dividerLen(i){i!==t(this,w)&&(n(this,w,i),t(this,g).call(this,this))}get maxTextLen(){return t(this,T)}set maxTextLen(i){i!==t(this,T)&&(n(this,T,i),t(this,g).call(this,this))}get maxChLen(){return t(this,C)}set maxChLen(i){i!==t(this,C)&&(n(this,C,i),t(this,g).call(this,this))}}A=new WeakMap,w=new WeakMap,T=new WeakMap,C=new WeakMap,g=new WeakMap;var k,o,m,u,F,p,x,d,b,a,O,P,q,U,S;class G extends HTMLElement{constructor(){super();c(this,a);c(this,k);c(this,o,[]);c(this,m);c(this,u);c(this,F,"…");c(this,p,!0);c(this,x);c(this,d);c(this,b);window.addEventListener("resize",()=>{l(this,a,S).call(this)}),window.addEventListener("focus",()=>{n(this,p,!0),l(this,a,S).call(this)}),window.addEventListener("blur",()=>{n(this,p,!1),l(this,a,P).call(this)}),document.addEventListener("visibilitychange",()=>{document.hidden?l(this,a,P).call(this):l(this,a,S).call(this)}),n(this,d,new j(e=>{l(this,a,U).call(this)})),n(this,b,this.attachInternals())}static get observedAttributes(){return["title","at","divider","disabled","ms","truncated"]}connectedCallback(){t(this,x)||n(this,x,new ResizeObserver(e=>{const{contentBoxSize:s}=e[0],{inlineSize:r}=s[0];r&&(t(this,d).elLen=r)})),t(this,x).observe(this),l(this,a,S).call(this)}disconnectedCallback(){l(this,a,P).call(this),t(this,x)&&t(this,x).disconnect()}attributeChangedCallback(e,s,r){e==="title"&&(this.ariaLabel=r,t(this,k)||n(this,k,new Intl.Segmenter),r?Array.from(t(this,k).segment(r)).forEach((f,L)=>{var v;t(this,o)[L]={...f,input:"",length:((v=t(this,o)[L])==null?void 0:v.length)??0}}):n(this,o,[])),e==="truncated"&&l(this,a,q).call(this,this.truncated),l(this,a,S).call(this)}get at(){if(this.hasAttribute("at"))try{return parseInt(String(this.getAttribute("at")))}catch{return 50}return 50}set at(e){if(e==null)this.removeAttribute("at");else{const s=Math.max(0,Math.min(100,parseInt(String(e))));s&&this.setAttribute("at",String(s))}}get ms(){if(this.hasAttribute("at"))try{return parseInt(String(this.getAttribute("at")))}catch{return 16}return 16}set ms(e){if(!e)this.removeAttribute("ms");else{const s=Math.max(0,parseInt(String(e)));s&&this.setAttribute("ms",String(s))}}get divider(){return this.getAttribute("divider")??t(this,F)}set divider(e){e!=null&&e.length?this.setAttribute("divider",e):this.removeAttribute("divider")}get truncated(){return t(this,b).states.has("truncated")}}k=new WeakMap,o=new WeakMap,m=new WeakMap,u=new WeakMap,F=new WeakMap,p=new WeakMap,x=new WeakMap,d=new WeakMap,b=new WeakMap,a=new WeakSet,O=function(){if(!this||!t(this,p)||!this.isConnected||document.hidden)return!1;const e=this.getBoundingClientRect(),s=10;return e.top>=-s&&e.bottom<=window.innerHeight+s&&e.left>=-s&&e.right<=window.innerWidth+s},P=function(){t(this,m)&&(cancelIdleCallback(t(this,m)),n(this,m,void 0)),t(this,u)&&(cancelAnimationFrame(t(this,u)),n(this,u,void 0))},q=function(e){const s=t(this,b).states.has("truncated"),r=this.hasAttribute("truncated");e&&!s?t(this,b).states.add("truncated"):t(this,b).states.delete("truncated"),e&&!r?this.setAttribute("truncated",""):this.hasAttribute("truncated")&&this.removeAttribute("truncated")},U=function(){t(this,u)&&(cancelAnimationFrame(t(this,u)),n(this,u,void 0));const e=r=>this.innerText!==r?(this.innerText=r??"",!0):!1;n(this,u,requestAnimationFrame(()=>{var r;if(this&&(!this.isConnected||this.hasAttribute("disabled")))e(this.title);else{if(!t(this,a,O))return;const f=!this.title||!((r=t(this,o))!=null&&r.length);if(l(this,a,q).call(this,t(this,d).elLen<t(this,d).maxTextLen),f||!t(this,d).elLen||!this.truncated){e(this.title);return}if(t(this,d).elLen<=t(this,d).dividerLen){e(this.divider);return}const v=Math.floor(t(this,d).elLen-t(this,d).dividerLen-t(this,d).maxChLen),M=Math.floor(v*(this.at/100)),z=Math.floor(v-M),I=t(this,o).filter(({length:D},R,B)=>Math.ceil(B.slice(0,R).reduce((H,W)=>H+W.length,0)+D)<M).length,y=t(this,o).filter(({length:D},R,B)=>Math.ceil(B.slice(-R).reduce((H,W)=>H+W.length,0)+D)>z).length,E=this.title.slice(0,I),V=this.title.slice(y);e(`${E}${this.divider}${V}`)}}))},S=function(){if(!this||t(this,m))return;const e=()=>{const s=this.innerText,{writingMode:r}=getComputedStyle(this),f=r.startsWith("vertical"),L=r.startsWith("sideways"),v=f||L,M=()=>{const{width:I,height:y}=this.getBoundingClientRect();return v?y:I};n(this,F,f?"︙":"…"),this.innerText=this.divider,t(this,d).dividerLen=Math.ceil(M());let z=0;t(this,o).forEach((I,y)=>{this.innerText=I.segment;const E=Math.ceil(M());z+=E,t(this,o)[y].length=E,t(this,d).maxChLen=Math.max(E,t(this,d).maxChLen)}),t(this,d).maxTextLen=z,this.innerText=this.title,t(this,d).elLen=Math.floor(M()),this.innerText=s,n(this,m,void 0)};n(this,m,requestIdleCallback(e,{timeout:this.ms}))};customElements.define("middle-truncate",G);
//# sourceMappingURL=index-D4m_76cf.js.map
