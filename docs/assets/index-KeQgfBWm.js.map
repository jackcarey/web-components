{"version":3,"file":"index-KeQgfBWm.js","sources":["../../packages/mirror-element/index.ts"],"sourcesContent":["\n\n\n/**\n * MirrorElement copies content from an element given by a selector into itself.\n */\nclass MirrorElement extends HTMLElement {\n    static get observedAttributes(): string[] {\n        return ['selector', 'strip-ids', 'disabled'];\n    }\n\n    #mutationObserver: MutationObserver;\n\n    connectedCallback(): void {\n        this.#setupObserver();\n        if (!this.disabled) {\n            this.render();\n        }\n    }\n\n    disconnectedCallback(): void {\n        this.#mutationObserver?.disconnect();\n    }\n\n    attributeChangedCallback(name: string): void {\n        if (name === 'selector' || name === 'disabled') {\n            this.#setupObserver();\n        }\n        if (!this.disabled) {\n            this.render();\n        }\n    }\n\n    #setupObserver() {\n        this.#mutationObserver?.disconnect();\n\n        if (this.disabled) return;\n\n        if (!this.#mutationObserver) {\n            this.#mutationObserver = new MutationObserver(() => {\n                this.render();\n            });\n        }\n\n        if (this.selector) {\n            const target = document.querySelector(this.selector);\n            if (target) {\n                this.#mutationObserver.observe(target, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true,\n                    characterData: true,\n                });\n            }\n        }\n    }\n\n    get selector(): string | null {\n        return this.getAttribute('selector');\n    }\n\n    set selector(value: string | null | undefined) {\n        if (value?.length) {\n            this.setAttribute('selector', value);\n        } else {\n            this.removeAttribute('selector');\n        }\n    }\n\n    get stripIds(): boolean {\n        return this.hasAttribute('strip-ids');\n    }\n\n    set stripIds(value: boolean) {\n        if (value) {\n            this.setAttribute('strip-ids', '');\n        } else {\n            this.removeAttribute('strip-ids');\n        }\n    }\n\n    get disabled(): boolean {\n        return this.hasAttribute('disabled');\n    }\n\n    set disabled(value: boolean) {\n        if (value) {\n            this.setAttribute('disabled', '');\n        } else {\n            this.removeAttribute(\"disabled\");\n        }\n    }\n\n    render() {\n        this.innerHTML = '';\n        if (!this.selector) return;\n        const el = document.querySelector(this.selector);\n        if (!el) return;\n        this.innerHTML = el.innerHTML;\n        if (this.stripIds) {\n            this.querySelectorAll('[id]').forEach(el => {\n                el.removeAttribute(\"id\");\n            });\n        }\n    }\n}\n\nexport { MirrorElement }\n\nif (customElements && !customElements.get(\"mirror-element\")) {\n    customElements.define(\"mirror-element\", MirrorElement);\n}"],"names":["_mutationObserver","_MirrorElement_instances","setupObserver_fn","MirrorElement","__privateAdd","__privateMethod","_a","__privateGet","name","value","el","__privateSet","target"],"mappings":"yXAMA,IAAAA,EAAAC,EAAAC,EAAA,MAAMC,UAAsB,WAAY,CAAxC,kCAAAC,EAAA,KAAAH,GAKIG,EAAA,KAAAJ,GAJA,WAAW,oBAA+B,CACtC,MAAO,CAAC,WAAY,YAAa,UAAU,CAC/C,CAIA,mBAA0B,CACtBK,EAAA,KAAKJ,EAAAC,GAAL,WACK,KAAK,UACN,KAAK,OAAA,CAEb,CAEA,sBAA6B,CAdjC,IAAAI,GAeQA,EAAAC,EAAA,KAAKP,KAAL,MAAAM,EAAwB,YAC5B,CAEA,yBAAyBE,EAAoB,EACrCA,IAAS,YAAcA,IAAS,aAChCH,EAAA,KAAKJ,EAAAC,GAAL,WAEC,KAAK,UACN,KAAK,OAAA,CAEb,CA0BA,IAAI,UAA0B,CAC1B,OAAO,KAAK,aAAa,UAAU,CACvC,CAEA,IAAI,SAASO,EAAkC,CACvCA,GAAA,MAAAA,EAAO,OACP,KAAK,aAAa,WAAYA,CAAK,EAEnC,KAAK,gBAAgB,UAAU,CAEvC,CAEA,IAAI,UAAoB,CACpB,OAAO,KAAK,aAAa,WAAW,CACxC,CAEA,IAAI,SAASA,EAAgB,CACrBA,EACA,KAAK,aAAa,YAAa,EAAE,EAEjC,KAAK,gBAAgB,WAAW,CAExC,CAEA,IAAI,UAAoB,CACpB,OAAO,KAAK,aAAa,UAAU,CACvC,CAEA,IAAI,SAASA,EAAgB,CACrBA,EACA,KAAK,aAAa,WAAY,EAAE,EAEhC,KAAK,gBAAgB,UAAU,CAEvC,CAEA,QAAS,CAEL,GADA,KAAK,UAAY,GACb,CAAC,KAAK,SAAU,OACpB,MAAMC,EAAK,SAAS,cAAc,KAAK,QAAQ,EAC1CA,IACL,KAAK,UAAYA,EAAG,UAChB,KAAK,UACL,KAAK,iBAAiB,MAAM,EAAE,QAAQA,GAAM,CACxCA,EAAG,gBAAgB,IAAI,CAC3B,CAAC,EAET,CACJ,CA9FIV,EAAA,YALJC,EAAA,YA2BIC,EAAA,UAAiB,CA3BrB,IAAAI,EA8BQ,IAFAA,EAAAC,EAAA,KAAKP,KAAL,MAAAM,EAAwB,aAEpB,MAAK,WAEJC,EAAA,KAAKP,IACNW,EAAA,KAAKX,EAAoB,IAAI,iBAAiB,IAAM,CAChD,KAAK,OAAA,CACT,CAAC,GAGD,KAAK,UAAU,CACf,MAAMY,EAAS,SAAS,cAAc,KAAK,QAAQ,EAC/CA,GACAL,EAAA,KAAKP,GAAkB,QAAQY,EAAQ,CACnC,UAAW,GACX,QAAS,GACT,WAAY,GACZ,cAAe,EAAA,CAClB,CAET,CACJ,EAsDA,gBAAkB,CAAC,eAAe,IAAI,gBAAgB,GACtD,eAAe,OAAO,iBAAkBT,CAAa"}