{"version":3,"file":"index-CZcBfukZ.js","sources":["../../packages/dynamic-template/index.ts"],"sourcesContent":["/**\n * Dynamically render the components DOM using corresponding templates.\n * This allows for a single component to have multiple themes or styles based on the template used.\n * The template is selected based on the closest ancestor element with a `data-dynamic-template`\n * attribute and the tag name of the component.\n * If no template is found, the light DOM content is used as-is.\n */\nexport class DynamicTemplate extends HTMLElement {\n    static datasetAttribute = 'dynamic-template';\n    static defaultTemplate: string | null | undefined = undefined;\n    static register(tagName: string) {\n        if (!tagName?.length) return;\n        if (\"customElements\" in window && !customElements.get(tagName)) {\n            customElements.define(tagName, DynamicTemplate);\n        }\n    }\n    #observer: MutationObserver | null;\n    constructor() {\n        super();\n    }\n    connectedCallback() {\n        if (!this.#observer) {\n            this.#observer = new MutationObserver(() => {\n                this.#render();\n            });\n        }\n        this.#observer.observe(document.body, { childList: true, subtree: true, attributes: true, attributeFilter: [`data-${DynamicTemplate.datasetAttribute}`] });\n        this.#render();\n    }\n    disconnectedCallback() {\n        if (this.#observer) {\n            this.#observer.disconnect();\n            this.#observer = null;\n        }\n    }\n    #render() {\n        if (!this.shadowRoot) {\n            this.attachShadow({\n                mode: 'open',\n                delegatesFocus: true\n            });\n        }\n        const dataEl = this.closest(`[data-${DynamicTemplate.datasetAttribute}]`);\n        const templateName = (dataEl as HTMLElement).dataset.dynamicTemplate;\n        const tagName = this.tagName.toLowerCase();\n        const templateId = templateName ? `${templateName}-${tagName}` : DynamicTemplate.defaultTemplate?.length ? DynamicTemplate.defaultTemplate : undefined;\n        const template = templateId ? document.querySelector(`template[id=\"${templateId}\"]`) as HTMLTemplateElement | null : null;\n\n        const exportedParts = template?.getAttribute('exportparts');\n        if (exportedParts) {\n            this.setAttribute('exportparts', exportedParts);\n        } else {\n            this.removeAttribute('exportparts');\n        }\n\n        if (template) {\n            const clone = (template as HTMLTemplateElement).content.cloneNode(true) as DocumentFragment;\n            this.shadowRoot!.innerHTML = '';\n            this.shadowRoot!.appendChild(clone);\n        } else {\n            //setting the innerHTML directly allows the `slot` attributes to be ignored.\n            this.shadowRoot!.innerHTML = this.innerHTML;\n        }\n    }\n}"],"names":["_observer","_DynamicTemplate_instances","render_fn","_DynamicTemplate","__privateAdd","tagName","__privateGet","__privateSet","__privateMethod","_a","templateName","templateId","template","exportedParts","clone","DynamicTemplate"],"mappings":"yXAOO,IAAAA,EAAAC,EAAAC,EAAA,MAAMC,EAAN,MAAMA,UAAwB,WAAY,CAU7C,aAAc,CACJ,MAAA,EAXPC,EAAA,KAAAH,GASHG,EAAA,KAAAJ,EAEU,CARV,OAAO,SAASK,EAAiB,CACxBA,GAAA,MAAAA,EAAS,QACV,mBAAoB,QAAU,CAAC,eAAe,IAAIA,CAAO,GAC1C,eAAA,OAAOA,EAASF,CAAe,CAClD,CAMJ,mBAAoB,CACXG,EAAA,KAAKN,IACDO,EAAA,KAAAP,EAAY,IAAI,iBAAiB,IAAM,CACxCQ,EAAA,KAAKP,EAAAC,GAAL,UAAa,CAChB,GAELI,EAAA,KAAKN,GAAU,QAAQ,SAAS,KAAM,CAAE,UAAW,GAAM,QAAS,GAAM,WAAY,GAAM,gBAAiB,CAAC,QAAQG,EAAgB,gBAAgB,EAAE,EAAG,EACzJK,EAAA,KAAKP,EAAAC,GAAL,UAAa,CAEjB,sBAAuB,CACfI,EAAA,KAAKN,KACLM,EAAA,KAAKN,GAAU,WAAW,EAC1BO,EAAA,KAAKP,EAAY,MACrB,CA+BR,EAhDIA,EAAA,YATGC,EAAA,YA4BHC,EAAU,UAAA,CA5BP,IAAAO,EA6BM,KAAK,YACN,KAAK,aAAa,CACd,KAAM,OACN,eAAgB,EAAA,CACnB,EAGC,MAAAC,EADS,KAAK,QAAQ,SAASP,EAAgB,gBAAgB,GAAG,EAC3B,QAAQ,gBAC/CE,EAAU,KAAK,QAAQ,YAAY,EACnCM,EAAaD,EAAe,GAAGA,CAAY,IAAIL,CAAO,IAAKI,EAAAN,EAAgB,kBAAhB,MAAAM,EAAiC,OAASN,EAAgB,gBAAkB,OACvIS,EAAWD,EAAa,SAAS,cAAc,gBAAgBA,CAAU,IAAI,EAAkC,KAE/GE,EAAgBD,GAAA,YAAAA,EAAU,aAAa,eAO7C,GANIC,EACK,KAAA,aAAa,cAAeA,CAAa,EAE9C,KAAK,gBAAgB,aAAa,EAGlCD,EAAU,CACV,MAAME,EAASF,EAAiC,QAAQ,UAAU,EAAI,EACtE,KAAK,WAAY,UAAY,GACxB,KAAA,WAAY,YAAYE,CAAK,CAAA,MAG7B,KAAA,WAAY,UAAY,KAAK,SACtC,EAtDJX,EAAO,iBAAmB,mBAC1BA,EAAO,gBAA6C,OAFjD,IAAMY,EAANZ"}