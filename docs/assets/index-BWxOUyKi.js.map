{"version":3,"file":"index-BWxOUyKi.js","sources":["../../packages/dynamic-template/index.ts"],"sourcesContent":["/**\n * Dynamically render the components DOM using corresponding templates.\n * This allows for a single component to have multiple themes or styles based on the template used.\n * The template is selected based on the closest ancestor element with a `data-dynamic-template`\n * attribute and the tag name of the component.\n * If no template is found, the light DOM content is used as-is.\n */\nexport class DynamicTemplate extends HTMLElement {\n    static datasetAttribute = 'dynamic-template';\n    static defaultTemplate: string | null | undefined = undefined;\n    #observer: MutationObserver | null;\n    constructor() {\n        super();\n    }\n    connectedCallback() {\n        if (!this.#observer) {\n            this.#observer = new MutationObserver(() => {\n                this.render();\n            });\n        }\n        this.#observer.observe(document.body, { childList: true, subtree: true, attributes: true, attributeFilter: [`data-${DynamicTemplate.datasetAttribute}`] });\n        this.render();\n    }\n    disconnectedCallback() {\n        if (this.#observer) {\n            this.#observer.disconnect();\n            this.#observer = null;\n        }\n    }\n    protected get templateName(): string | undefined {\n        const dataEl = this.closest(`[data-${DynamicTemplate.datasetAttribute}]`);\n        const templateName = (dataEl as HTMLElement).dataset.dynamicTemplate;\n        return templateName;\n    }\n    protected get templateId(): string | undefined {\n        const tagName = this.tagName.toLowerCase();\n        const templateId = this.templateName ? `${this.templateName}-${tagName}` : DynamicTemplate.defaultTemplate?.length ? DynamicTemplate.defaultTemplate : undefined;\n        return templateId;\n    }\n    protected render(templateId?: string) {\n        if (!this.shadowRoot) {\n            this.attachShadow({\n                mode: 'open',\n                delegatesFocus: true\n            });\n        }\n        const usingTemplateId: string | undefined = templateId || this.templateId;\n        const template = usingTemplateId ? document.querySelector(`template[id=\"${usingTemplateId}\"]`) as HTMLTemplateElement | null : null;\n\n        const exportedParts = template?.getAttribute('exportparts');\n        if (exportedParts) {\n            this.setAttribute('exportparts', exportedParts);\n        } else {\n            this.removeAttribute('exportparts');\n        }\n\n        if (template) {\n            const clone = (template as HTMLTemplateElement).content.cloneNode(true) as DocumentFragment;\n            this.shadowRoot!.innerHTML = '';\n            this.shadowRoot!.appendChild(clone);\n        } else {\n            //setting the innerHTML directly allows the `slot` attributes to be ignored.\n            this.shadowRoot!.innerHTML = this.innerHTML;\n        }\n    }\n}"],"names":["_observer","_DynamicTemplate","__privateAdd","__privateGet","__privateSet","_a","tagName","templateId","usingTemplateId","template","exportedParts","clone","DynamicTemplate"],"mappings":"2UAOO,IAAAA,EAAA,MAAMC,EAAN,MAAMA,UAAwB,WAAY,CAI7C,aAAc,CACV,MAAA,EAFJC,EAAA,KAAAF,EAGA,CACA,mBAAoB,CACXG,EAAA,KAAKH,IACNI,EAAA,KAAKJ,EAAY,IAAI,iBAAiB,IAAM,CACxC,KAAK,OAAA,CACT,CAAC,GAELG,EAAA,KAAKH,GAAU,QAAQ,SAAS,KAAM,CAAE,UAAW,GAAM,QAAS,GAAM,WAAY,GAAM,gBAAiB,CAAC,QAAQC,EAAgB,gBAAgB,EAAE,EAAG,EACzJ,KAAK,OAAA,CACT,CACA,sBAAuB,CACfE,EAAA,KAAKH,KACLG,EAAA,KAAKH,GAAU,WAAA,EACfI,EAAA,KAAKJ,EAAY,MAEzB,CACA,IAAc,cAAmC,CAG7C,OAFe,KAAK,QAAQ,SAASC,EAAgB,gBAAgB,GAAG,EAC3B,QAAQ,eAEzD,CACA,IAAc,YAAiC,CA3B5C,IAAAI,EA4BC,MAAMC,EAAU,KAAK,QAAQ,YAAA,EAE7B,OADmB,KAAK,aAAe,GAAG,KAAK,YAAY,IAAIA,CAAO,IAAKD,EAAAJ,EAAgB,kBAAhB,MAAAI,EAAiC,OAASJ,EAAgB,gBAAkB,MAE3J,CACU,OAAOM,EAAqB,CAC7B,KAAK,YACN,KAAK,aAAa,CACd,KAAM,OACN,eAAgB,EAAA,CACnB,EAEL,MAAMC,EAAsCD,GAAc,KAAK,WACzDE,EAAWD,EAAkB,SAAS,cAAc,gBAAgBA,CAAe,IAAI,EAAkC,KAEzHE,EAAgBD,GAAA,YAAAA,EAAU,aAAa,eAO7C,GANIC,EACA,KAAK,aAAa,cAAeA,CAAa,EAE9C,KAAK,gBAAgB,aAAa,EAGlCD,EAAU,CACV,MAAME,EAASF,EAAiC,QAAQ,UAAU,EAAI,EACtE,KAAK,WAAY,UAAY,GAC7B,KAAK,WAAY,YAAYE,CAAK,CACtC,MAEI,KAAK,WAAY,UAAY,KAAK,SAE1C,CACJ,EAvDIX,EAAA,YAFAC,EAAO,iBAAmB,mBAC1BA,EAAO,gBAA6C,OAFjD,IAAMW,EAANX"}