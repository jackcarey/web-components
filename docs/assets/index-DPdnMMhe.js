var m=e=>{throw TypeError(e)};var a=(e,i,t)=>i.has(e)||m("Cannot "+t);var h=(e,i,t)=>(a(e,i,"read from private field"),t?t.call(e):i.get(e)),d=(e,i,t)=>i.has(e)?m("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,t),b=(e,i,t,s)=>(a(e,i,"write to private field"),s?s.call(e,t):i.set(e,t),t),c=(e,i,t)=>(a(e,i,"access private method"),t);var o,l,f,u;class A extends HTMLElement{constructor(){super(...arguments);d(this,l);d(this,o,null)}static get observedAttributes(){return["selector","limit","link","text-only","offset"]}get selector(){return this.getAttribute("selector")}set selector(t){t!=null&&t.length?this.setAttribute("selector",t):this.removeAttribute("selector")}get limit(){try{const t=parseInt(this.getAttribute("limit")||"0",10);return isNaN(t)||t<=0?0:t}catch{return 0}}set limit(t){t>=0?this.setAttribute("limit",t.toString()):this.removeAttribute("limit")}get link(){return this.getAttribute("link")==="true"}set link(t){t?this.setAttribute("link","true"):this.removeAttribute("link")}get textOnly(){return this.hasAttribute("text-only")}set textOnly(t){t?this.setAttribute("text-only",""):this.removeAttribute("text-only")}get offset(){try{const t=parseInt(this.getAttribute("offset")||"0",0);return isNaN(t)?0:t}catch{return 0}}set offset(t){this.setAttribute("offset",String(t))}get observedElements(){if(!this.selector)return[];const t=document.querySelectorAll(this.selector);return Array.from(t)}get citationElements(){const t=this.observedElements;if(t.length===0)return[];const s=[];return t.forEach(r=>{r.querySelectorAll("cite").forEach(n=>{s.includes(n)||s.push(n)})}),s.slice(this.offset,this.limit?this.offset+this.limit:void 0)}connectedCallback(){c(this,l,f).call(this),c(this,l,u).call(this)}disconnectedCallback(){var t;(t=h(this,o))==null||t.disconnect()}attributeChangedCallback(t,s,r){t==="selector"&&c(this,l,f).call(this),c(this,l,u).call(this)}}o=new WeakMap,l=new WeakSet,f=function(){var t;h(this,o)||b(this,o,new MutationObserver(()=>{c(this,l,u).call(this)})),(t=h(this,o))==null||t.disconnect(),this.observedElements.length>0&&this.observedElements.forEach(s=>{var r;(r=h(this,o))==null||r.observe(s,{attributes:!0,childList:!0,subtree:!0,characterData:!0})})},u=function(){this.innerHTML="";const t=document.createElement("ol");if(this.appendChild(t),this.citationElements.length>0){t.setAttribute("data-cite-count",this.citationElements.length.toString());const s={behavior:"smooth",block:"center",inline:"center"};this.citationElements.forEach(r=>{const n=document.createElement("li");t.appendChild(n),this.textOnly?n.textContent=r.innerText||"":(n.innerHTML=r.cloneNode(!0).innerHTML||"",n.querySelectorAll("[id]").forEach(g=>{g.removeAttribute("id")})),r.id&&n.setAttribute("data-cite-id",r.id),this.link&&(n.classList.add("cite-link"),n.addEventListener("click",()=>{r.scrollIntoView(s)}))})}this.dataset.observedElementCount=this.observedElements.length.toString(),this.dataset.citeCount=this.citationElements.length.toString()};customElements&&!customElements.get("cite-list")&&customElements.define("cite-list",A);export{A as CiteList};
//# sourceMappingURL=index-DPdnMMhe.js.map
