{"version":3,"file":"index-TshILf1E.js","sources":["../../packages/autoloader/components.ts","../../packages/autoloader/index.ts"],"sourcesContent":["const components: Record<string, string> = {\"can-i-use\":\"1.0.44\",\"capture-dom\":\"0.0.24\",\"cite-list\":\"1.0.24\",\"diff-text\":\"1.0.68\",\"dynamic-template\":\"1.0.36\",\"i-cal\":\"1.1.44\",\"kbd-click\":\"1.0.36\",\"middle-truncate\":\"0.1.37\",\"mirror-element\":\"0.0.24\",\"reveal-presentation\":\"0.0.41\",\"rss-feed\":\"0.0.36\",\"search-dom\":\"0.0.37\"};\nexport default components;","import components from \"./components\";\n\n/**\n * Automatically loads components from JSR @web-components.\n * It adds a script tag with the component's source URL to the document head.\n * It also observes the document body for any added nodes and loads the corresponding components.\n */\nconst autoload = () => {\n    //load from current DOM\n    Object.entries(components).forEach(([tagName]) => {\n        if (document.querySelector(tagName)) loadTag(tagName);\n    });\n\n    //load components when the DOM changes\n    const observer = new MutationObserver((mutationsList) => {\n        mutationsList.filter(mutation => mutation.type === \"childList\").forEach(mutation => {\n            const addedNodes = Array.from(mutation.addedNodes);\n            if (!addedNodes.length) return;\n            addedNodes.filter(node => node.nodeType === Node.ELEMENT_NODE).forEach((node) => {\n                const nodeTagName = node.nodeName.toLowerCase();\n                if (Object.keys(components).includes(nodeTagName)) loadTag(nodeTagName);\n            });\n        });\n    });\n\n    observer.observe(document.body, { childList: true, subtree: true });\n};\n\n/**\n * Loads a web component by dynamically creating a script tag and appending it to the document head.\n * @param name - The name of the web component to load.\n */\nconst loadTag = (name: string) => {\n    if (!name) return;\n    if (customElements.get(name)) return; // Prevent loading if already defined\n    const version = components[name] ?? \"latest\";\n    const script = document.createElement(\"script\");\n    script.type = \"module\";\n    script.async = true;\n    script.src = `https://esm.sh/jsr/@web-components/${encodeURIComponent(name)}${version === \"latest\" ? \"\" : `@${version}`}`;\n    const alreadyExists = document.querySelector(`script[src=\"${script.src}\"]`);\n    if (alreadyExists) return; // Prevent loading the same script multiple times\n    document.head.appendChild(script);\n};\n\nwindow.addEventListener(\"DOMContentLoaded\", autoload);\n"],"names":["components","autoload","tagName","mutationsList","mutation","addedNodes","node","nodeTagName","loadTag","name","version","script"],"mappings":"AAAA,MAAMA,EAAqC,CAAC,YAAY,SAAS,cAAc,SAAS,YAAY,SAAS,YAAY,SAAS,mBAAmB,SAAS,QAAQ,SAAS,YAAY,SAAS,kBAAkB,SAAS,iBAAiB,SAAS,sBAAsB,SAAS,WAAW,SAAS,aAAa,QAAA,ECOnTC,EAAW,IAAM,CAEnB,OAAO,QAAQD,CAAU,EAAE,QAAQ,CAAC,CAACE,CAAO,IAAM,CAC1C,SAAS,cAAcA,CAAO,KAAWA,CAAO,CACxD,CAAC,EAGgB,IAAI,iBAAkBC,GAAkB,CACrDA,EAAc,OAAOC,GAAYA,EAAS,OAAS,WAAW,EAAE,QAAQA,GAAY,CAChF,MAAMC,EAAa,MAAM,KAAKD,EAAS,UAAU,EAC5CC,EAAW,QAChBA,EAAW,UAAeC,EAAK,WAAa,KAAK,YAAY,EAAE,QAASA,GAAS,CAC7E,MAAMC,EAAcD,EAAK,SAAS,YAAA,EAC9B,OAAO,KAAKN,CAAU,EAAE,SAASO,CAAW,KAAWA,CAAW,CAC1E,CAAC,CACL,CAAC,CACL,CAAC,EAEQ,QAAQ,SAAS,KAAM,CAAE,UAAW,GAAM,QAAS,GAAM,CACtE,EAMMC,EAAWC,GAAiB,CAE9B,GADI,CAACA,GACD,eAAe,IAAIA,CAAI,EAAG,OAC9B,MAAMC,EAAUV,EAAWS,CAAI,GAAK,SAC9BE,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,SACdA,EAAO,MAAQ,GACfA,EAAO,IAAM,sCAAsC,mBAAmBF,CAAI,CAAC,GAAGC,IAAY,SAAW,GAAK,IAAIA,CAAO,EAAE,GACjG,UAAS,cAAc,eAAeC,EAAO,GAAG,IAAI,GAE1E,SAAS,KAAK,YAAYA,CAAM,CACpC,EAEA,OAAO,iBAAiB,mBAAoBV,CAAQ"}