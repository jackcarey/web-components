var f=e=>{throw TypeError(e)};var d=(e,i,t)=>i.has(e)||f("Cannot "+t);var u=(e,i,t)=>(d(e,i,"read from private field"),t?t.call(e):i.get(e)),m=(e,i,t)=>i.has(e)?f("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,t),g=(e,i,t,s)=>(d(e,i,"write to private field"),s?s.call(e,t):i.set(e,t),t),o=(e,i,t)=>(d(e,i,"access private method"),t);var n,r,b,a;class E extends HTMLElement{constructor(){super(...arguments);m(this,r);m(this,n)}static get observedAttributes(){return["selector","limit","link"]}get selector(){return this.getAttribute("selector")}set selector(t){t!=null&&t.length?this.setAttribute("selector",t):this.removeAttribute("selector")}get limit(){try{const t=parseInt(this.getAttribute("limit")||"0",10);return isNaN(t)||t<=0?0:t}catch{return 0}}set limit(t){t>=0?this.setAttribute("limit",t.toString()):this.removeAttribute("limit")}get link(){return this.getAttribute("link")==="true"}set link(t){t?this.setAttribute("link","true"):this.removeAttribute("link")}get observedElements(){if(!this.selector)return[];const t=document.querySelectorAll(this.selector);return Array.from(t)}get citationElements(){const t=this.observedElements;if(t.length===0)return[];const s=[];return t.forEach(l=>{l.querySelectorAll("cite").forEach(c=>{s.includes(c)||s.push(c)})}),this.limit?s.slice(0,this.limit):s}connectedCallback(){o(this,r,a).call(this),o(this,r,b).call(this)}disconnectedCallback(){var t;(t=u(this,n))==null||t.disconnect()}attributeChangedCallback(t,s,l){t==="selector"&&o(this,r,b).call(this),o(this,r,a).call(this)}}n=new WeakMap,r=new WeakSet,b=function(){var t;u(this,n)||g(this,n,new MutationObserver(()=>{o(this,r,a).call(this)})),(t=u(this,n))==null||t.disconnect(),this.observedElements.length>0&&this.observedElements.forEach(s=>{var l;(l=u(this,n))==null||l.observe(s,{attributes:!0,childList:!0,subtree:!0,characterData:!0})})},a=function(){this.innerHTML="";const t=this.citationElements,s=document.createElement("ol");if(this.appendChild(s),t.length>0){s.setAttribute("data-cite-count",t.length.toString());const l={behavior:"smooth",block:"center",inline:"center"};t.forEach(c=>{const h=document.createElement("li");s.appendChild(h),h.textContent=c.innerText||"",c.id&&h.setAttribute("data-cite-id",c.id),this.link&&(h.classList.add("cite-link"),h.addEventListener("click",()=>{c.scrollIntoView(l)}))})}};customElements&&!customElements.get("cite-list")&&customElements.define("cite-list",E);export{E as CiteList};
//# sourceMappingURL=index-DaU7GyZD.js.map
