var f=e=>{throw TypeError(e)};var d=(e,i,t)=>i.has(e)||f("Cannot "+t);var u=(e,i,t)=>(d(e,i,"read from private field"),t?t.call(e):i.get(e)),m=(e,i,t)=>i.has(e)?f("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,t),g=(e,i,t,s)=>(d(e,i,"write to private field"),s?s.call(e,t):i.set(e,t),t),o=(e,i,t)=>(d(e,i,"access private method"),t);var l,n,b,a;class A extends HTMLElement{constructor(){super(...arguments);m(this,n);m(this,l)}static get observedAttributes(){return["selector","limit","link"]}get selector(){return this.getAttribute("selector")}set selector(t){t!=null&&t.length?this.setAttribute("selector",t):this.removeAttribute("selector")}get limit(){try{const t=parseInt(this.getAttribute("limit")||"0",10);return isNaN(t)||t<=0?0:t}catch{return 0}}set limit(t){t>=0?this.setAttribute("limit",t.toString()):this.removeAttribute("limit")}get link(){return this.hasAttribute("link")}set link(t){t?this.setAttribute("link",""):this.removeAttribute("link")}get observedElements(){return this.selector?Array.from(this.querySelectorAll(this.selector)):[document.body]}get citeElements(){const t=this.observedElements;if(t.length===0)return[];const s=[];return t.forEach(c=>{c.querySelectorAll("cite").forEach(r=>{s.includes(r)||s.push(r)})}),this.limit?s.slice(0,this.limit):s}connectedCallback(){o(this,n,a).call(this),o(this,n,b).call(this)}disconnectedCallback(){var t;(t=u(this,l))==null||t.disconnect()}attributeChangedCallback(t,s,c){t==="selector"&&o(this,n,b).call(this),o(this,n,a).call(this)}}l=new WeakMap,n=new WeakSet,b=function(){var s;u(this,l)||g(this,l,new MutationObserver(()=>{o(this,n,a).call(this)})),(s=u(this,l))==null||s.disconnect();const t=this.querySelectorAll(this.selector||"cite");t.length>0&&t.forEach(c=>{var r;(r=u(this,l))==null||r.observe(c,{attributes:!0,childList:!0,subtree:!0,characterData:!0})})},a=function(){this.innerHTML="";const t=this.citeElements,s=document.createElement("ol");if(this.appendChild(s),t.length>0){s.setAttribute("data-cite-count",t.length.toString());const c={behavior:"smooth",block:"center",inline:"center"};t.forEach(r=>{const h=document.createElement("li");s.appendChild(h),h.textContent=r.innerText||"",r.id&&h.setAttribute("data-cite-id",r.id),this.link&&(h.addEventListener("click",()=>{r.scrollIntoView(c)}),h.classList.add("cite-link"))})}};customElements&&!customElements.get("cite-list")&&customElements.define("cite-list",A);export{A as CiteList};
//# sourceMappingURL=index-4THCAER5.js.map
