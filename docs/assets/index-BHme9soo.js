var h=a=>{throw TypeError(a)};var u=(a,t,s)=>t.has(a)||h("Cannot "+s);var c=(a,t,s)=>(u(a,t,"read from private field"),s?s.call(a):t.get(a)),l=(a,t,s)=>t.has(a)?h("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,s),b=(a,t,s,r)=>(u(a,t,"write to private field"),r?r.call(a,s):t.set(a,s),s);var n,i;const e=class e extends HTMLElement{static get datasetAttribute(){return c(e,i)??"dynamic-template"}static set datasetAttribute(t){b(e,i,t!=null&&t.length?t:"dynamic-template")}connectedCallback(){var t;e.instances.add(this),this.render(),e.observer||c(t=e,n).call(t)}disconnectedCallback(){e.instances.delete(this),e.instances.size===0&&e.observer&&(e.observer.disconnect(),e.observer=null)}get templateName(){return this.closest(`[data-${e.datasetAttribute}]`).dataset.dynamicTemplate}get templateId(){var r;const t=this.tagName.toLowerCase();return this.templateName?`${this.templateName}-${t}`:(r=e.defaultTemplate)!=null&&r.length?e.defaultTemplate:void 0}render(t){this.shadowRoot||this.attachShadow({mode:"open",delegatesFocus:!0});const s=t||this.templateId,r=s?document.querySelector(`template[id="${s}"]`):null,o=r==null?void 0:r.getAttribute("exportparts");if(o?this.setAttribute("exportparts",o):this.removeAttribute("exportparts"),r){const d=r.content.cloneNode(!0);this.shadowRoot.innerHTML="",this.shadowRoot.appendChild(d)}else this.shadowRoot.innerHTML=this.innerHTML}};n=new WeakMap,i=new WeakMap,l(e,n,()=>{var t;(t=e.observer)==null||t.disconnect(),e.observer=new MutationObserver(s=>{for(const r of e.instances)s.some(d=>d.target.contains(r))&&r.render()}),e.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[`data-${e.datasetAttribute}`]}),e.instances.forEach(s=>{s.render()})}),l(e,i,"dynamic-template"),e.defaultTemplate=void 0,e.observer=null,e.instances=new Set;let p=e;export{p as DynamicTemplate};
//# sourceMappingURL=index-BHme9soo.js.map
