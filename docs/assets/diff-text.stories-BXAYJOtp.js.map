{"version":3,"file":"diff-text.stories-BXAYJOtp.js","sources":["../../stories/components/diff-text.stories.tsx"],"sourcesContent":["import { Args, Meta, StoryObj } from \"@storybook/web-components-vite\";\nimport { CreateComponentDecorators, CreateComponentStoryMeta } from \"../utils\";\nimport { html } from \"lit\";\nimport { DiffText } from \"../../packages/diff-text\";\n\nconst renderFn: StoryObj[\"render\"] = (args: Args) => {\n    return html`<style>\n            diff-text {\n                display: block;\n                border: 1px solid #ccc;\n                min-height: 1em;\n            }\n            .diff-text-removed {\n                background-color: #ffcccc;\n                text-decoration: line-through;\n            }\n            .diff-text-added {\n                background-color: #ccffcc;\n            }\n        </style>\n        <b>#original text:</b><br />\n        <p id=\"original\" title=\"The original title\">\n            The FIVE boxing Wizards jump quickly. (original span)\n        </p>\n        <b>#changed text:</b><br />\n        <p id=\"changed\" title=\"A changed title\">\n            the five boxing wizards jump quickly. (changed span)\n        </p>\n        <b>Diff Text Component:</b>\n        <p>\n            <diff-text\n                original-selector=\"${args.originalSelector}\"\n                changed-selector=\"${args.changedSelector}\"\n                original-src=\"${args[\"original-src\"]}\"\n                changed-src=\"${args[\"changed-src\"]}\"\n                mode=\"${args.mode}\"\n                compare=\"${args.compare}\"\n                ignore-case=\"${args[\"ignore-case\"]}\"\n                refetch=\"${args.refetch}\"\n            ></diff-text>\n            ${!args.options\n                ? \"\"\n                : html`<script>\n                      const diffText = document.querySelector(\"diff-text\");\n                      diffText.options = ${args.options};\n                  </script>`}\n        </p>\n        <b>Args:</b><br />\n        <pre>${JSON.stringify(args, null, 2)}</pre>`;\n};\n\nconst meta: Meta = {\n    ...CreateComponentStoryMeta(\"diff-text\", undefined, {\n        decorators: [\n            ...CreateComponentDecorators(\"diff-text\", undefined),\n            (story) => {\n                if (!customElements.get(\"diff-text\")) {\n                    customElements.define(\"diff-text\", DiffText);\n                }\n                return html`${story()}`;\n            },\n        ],\n    }),\n    render: renderFn,\n    parameters: {\n        //these stories are ignored by default, they must be opt-ed in by setting this to false\n        chromatic: { disableSnapshot: true },\n    },\n};\n\nexport default meta;\ntype Story = StoryObj;\n\nexport const Default: Story = {\n    args: { originalSelector: \"#original\", changedSelector: \"#changed\" },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const CompareChars: Story = {\n    args: {\n        originalSelector: \"#original\",\n        changedSelector: \"#changed\",\n        mode: \"chars\",\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const IgnoreCase: Story = {\n    args: {\n        originalSelector: \"#original\",\n        changedSelector: \"#changed\",\n        \"ignore-case\": true,\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const IgnoreCaseChars: Story = {\n    args: {\n        originalSelector: \"#original\",\n        changedSelector: \"#changed\",\n        mode: \"chars\",\n        \"ignore-case\": true,\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const WithChangingText: Story = {\n    args: {\n        originalSelector: \"#original\",\n        changedSelector: \"#changed\",\n        mode: \"chars\",\n    },\n    render: (args: Args, context) => {\n        const originalStory = renderFn(args, context);\n        return html`${originalStory}\n            <script>\n                let originalText = document.querySelector(\"#original\");\n                let changedText = document.querySelector(\"#changed\");\n                const setOriginal = () => {\n                    originalText.textContent = \\`This will change 250ms. \\${new Date().toISOString()}\\`;\n                };\n                setInterval(setOriginal, 250);\n                setOriginal();\n                const setChanged = () => {\n                    changedText.textContent = \\`This will change every second. \\${new Date().toISOString()}\\`;\n                };\n                setChanged();\n                setInterval(setChanged, 1000);\n            </script>`;\n    },\n};\n\nexport const OriginalSrc: Story = {\n    name: \"Original Src (remote text)\",\n    args: {\n        \"original-src\":\n            \"https://gist.githubusercontent.com/jackcarey/8ba2b5b02fb1371171e268f4a557e7bf/raw/0ea3c70a4ecc6183c6a63c820eabfc15a4c97c71/text.txt\",\n        changedSelector: \"#changed\",\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const ChangedSrc: Story = {\n    name: \"Changed Src (remote text)\",\n    args: {\n        originalSelector: \"#original\",\n        \"changed-src\":\n            \"https://gist.githubusercontent.com/jackcarey/d8098b3784dcce32f9a4266c89bc1148/raw/abb8bb4d96fadb307997bf1592283b727910f798/other-text.txt\",\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const OriginalAndChangedSrc: Story = {\n    name: \"Both Src (remote text)\",\n    args: {\n        \"original-src\":\n            \"https://gist.githubusercontent.com/jackcarey/8ba2b5b02fb1371171e268f4a557e7bf/raw/0ea3c70a4ecc6183c6a63c820eabfc15a4c97c71/text.txt\",\n        \"changed-src\":\n            \"https://gist.githubusercontent.com/jackcarey/d8098b3784dcce32f9a4266c89bc1148/raw/abb8bb4d96fadb307997bf1592283b727910f798/other-text.txt\",\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const Refresh: Story = {\n    name: \"Refresh (every 30 seconds)\",\n    args: {\n        mode: \"json\",\n        \"original-src\": \"http://numbersapi.com/random/math?json\",\n        \"changed-src\": \"http://numbersapi.com/random/math?json\",\n        refetch: 30,\n    },\n};\n\nexport const CompareAttr: Story = {\n    name: \"Compare by attribute (title)\",\n    args: {\n        originalSelector: \"#original\",\n        changedSelector: \"#changed\",\n        compare: \"title\",\n        mode: \"chars\",\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n\nexport const Lines: Story = {\n    name: \"Compare by lines\",\n    args: {\n        \"original-src\": \"https://baconipsum.com/api/?type=meat-and-filler&paras=3&format=text\",\n        \"changed-src\": \"https://baconipsum.com/api/?type=meat-and-filler&paras=3&format=text\",\n        mode: \"lines\",\n    },\n};\n\nexport const Arrays = {\n    name: \"Compare arrays\",\n    args: {\n        \"original-src\": \"https://jsonplaceholder.typicode.com/comments?postId=1\",\n        \"changed-src\": \"https://jsonplaceholder.typicode.com/comments?postId=2\",\n        mode: \"arrays\",\n    },\n};\n\nexport const Callback: Story = {\n    name: \"Callback (on diff)\",\n    args: {\n        originalSelector: \"#original\",\n        changedSelector: \"#changed\",\n        mode: \"chars\",\n        options: `{\n            callback: (diff) => {\n                console.log(\"Diff callback:\", diff);\n                return diff;\n            }\n        }`,\n    },\n    parameters: {\n        chromatic: { disableSnapshot: false },\n    },\n};\n"],"names":["_a","_b","renderFn","args","html","originalSelector","changedSelector","mode","compare","refetch","options","__template","JSON","stringify","meta","CreateComponentStoryMeta","undefined","decorators","CreateComponentDecorators","story","customElements","get","define","DiffText","render","parameters","chromatic","disableSnapshot","Default","CompareChars","IgnoreCase","IgnoreCaseChars","WithChangingText","context","originalStory","OriginalSrc","name","ChangedSrc","OriginalAndChangedSrc","Refresh","CompareAttr","Lines","Arrays","Callback","docs","source","originalSource"],"mappings":"wOAAAA,EAAAC,EAKA,MAAMC,GAAgCC,GAC3BC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,qCAyB0BD,EAAKE,gBAAgB;AAAA,oCACtBF,EAAKG,eAAe;AAAA,gCACxBH,EAAK,cAAc,CAAC;AAAA,+BACrBA,EAAK,aAAa,CAAC;AAAA,wBAC1BA,EAAKI,IAAI;AAAA,2BACNJ,EAAKK,OAAO;AAAA,+BACRL,EAAK,aAAa,CAAC;AAAA,2BACvBA,EAAKM,OAAO;AAAA;AAAA,cAExBN,EAAKO,QAEFN,QAAIO,GAAA,CAAA;AAAA;AAAA,2CAEiC;AAAA,6BAAA,CAAA,GAAZR,EAAKO,OAAAA,EAH9B,EAIU;AAAA;AAAA;AAAA,eAGbE,KAAKC,UAAUV,EAAM,KAAM,CAAC,CAAC,SAGtCW,GAAa,CACf,GAAGC,GAAyB,YAAaC,OAAW,CAChDC,WAAY,CACR,GAAGC,GAA0B,YAAaF,MAAS,EAClDG,IACQC,eAAeC,IAAI,WAAW,GAC/BD,eAAeE,OAAO,YAAaC,EAAQ,EAExCnB,IAAOe,GAAO,GACxB,CAAA,CAER,EACDK,OAAQtB,GACRuB,WAAY,CAERC,UAAW,CAAEC,gBAAiB,EAAA,CAAK,CAE3C,EAKaC,EAAiB,CAC1BzB,KAAM,CAAEE,iBAAkB,YAAaC,gBAAiB,UAAA,EACxDmB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEaE,EAAsB,CAC/B1B,KAAM,CACFE,iBAAkB,YAClBC,gBAAiB,WACjBC,KAAM,OAAA,EAEVkB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEaG,EAAoB,CAC7B3B,KAAM,CACFE,iBAAkB,YAClBC,gBAAiB,WACjB,cAAe,EAAA,EAEnBmB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEaI,EAAyB,CAClC5B,KAAM,CACFE,iBAAkB,YAClBC,gBAAiB,WACjBC,KAAM,QACN,cAAe,EAAA,EAEnBkB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEaK,EAA0B,CACnC7B,KAAM,CACFE,iBAAkB,YAClBC,gBAAiB,WACjBC,KAAM,OAAA,EAEViB,OAAQA,CAACrB,EAAY8B,IAAY,CAC7B,MAAMC,GAAgBhC,GAASC,CAAa,EAC5C,OAAOC,EAAAA,IAAAA,EAAIO,GAAA,CAAA,GAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAA,EAAhB,CAAA,GAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAA,CAAA,GAAbuB,EAAAA,CAelB,CACJ,EAEaC,EAAqB,CAC9BC,KAAM,6BACNjC,KAAM,CACF,eACI,sIACJG,gBAAiB,UAAA,EAErBmB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEaU,EAAoB,CAC7BD,KAAM,4BACNjC,KAAM,CACFE,iBAAkB,YAClB,cACI,2IAAA,EAERoB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEaW,EAA+B,CACxCF,KAAM,yBACNjC,KAAM,CACF,eACI,sIACJ,cACI,2IAAA,EAERsB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEaY,EAAiB,CAC1BH,KAAM,6BACNjC,KAAM,CACFI,KAAM,OACN,eAAgB,yCAChB,cAAe,yCACfE,QAAS,EAAA,CAEjB,EAEa+B,EAAqB,CAC9BJ,KAAM,+BACNjC,KAAM,CACFE,iBAAkB,YAClBC,gBAAiB,WACjBE,QAAS,QACTD,KAAM,OAAA,EAEVkB,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAEac,EAAe,CACxBL,KAAM,mBACNjC,KAAM,CACF,eAAgB,uEAChB,cAAe,uEACfI,KAAM,OAAA,CAEd,EAEamC,EAAS,CAClBN,KAAM,iBACNjC,KAAM,CACF,eAAgB,yDAChB,cAAe,yDACfI,KAAM,QAAA,CAEd,EAEaoC,EAAkB,CAC3BP,KAAM,qBACNjC,KAAM,CACFE,iBAAkB,YAClBC,gBAAiB,WACjBC,KAAM,QACNG,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA,UAAA,EAObe,WAAY,CACRC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,YAACC,EAAAH,WAAA,CAAA,GAAAG,EAAAH,WAAAmB,KAAA,CAAA,IAAAhB,EAAAA,EAAAH,aAAAG,YAAAA,EAAAgB,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAlB,GAAAA,EAAAA,EAAAH,aAAAG,YAAAA,EAAAgB,OAAAhB,YAAAA,EAAAiB,MAAAA,CAAA,CAAA,YAAAhB,EAAAJ,WAAA,CAAA,GAAAI,EAAAJ,WAAAmB,KAAA,CAAA,IAAAf,EAAAA,EAAAJ,aAAAI,YAAAA,EAAAe,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAjB,GAAAA,EAAAA,EAAAJ,aAAAI,YAAAA,EAAAe,OAAAf,YAAAA,EAAAgB,MAAAA,CAAA,CAAA,YAAAf,EAAAL,WAAA,CAAA,GAAAK,EAAAL,WAAAmB,KAAA,CAAA,IAAAd,EAAAA,EAAAL,aAAAK,YAAAA,EAAAc,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAhB,GAAAA,EAAAA,EAAAL,aAAAK,YAAAA,EAAAc,OAAAd,YAAAA,EAAAe,MAAAA,CAAA,CAAA,YAAAd,EAAAN,WAAA,CAAA,GAAAM,EAAAN,WAAAmB,KAAA,CAAA,IAAAb,EAAAA,EAAAN,aAAAM,YAAAA,EAAAa,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAf,GAAAA,EAAAA,EAAAN,aAAAM,YAAAA,EAAAa,OAAAb,YAAAA,EAAAc,MAAAA,CAAA,CAAA,YAAAb,EAAAP,WAAA,CAAA,GAAAO,EAAAP,WAAAmB,KAAA,CAAA,IAAAZ,EAAAA,EAAAP,aAAAO,YAAAA,EAAAY,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAd,GAAAA,EAAAA,EAAAP,aAAAO,YAAAA,EAAAY,OAAAZ,YAAAA,EAAAa,MAAAA,CAAA,CAAA,YAAAV,EAAAV,WAAA,CAAA,GAAAU,EAAAV,WAAAmB,KAAA,CAAA,IAAAT,EAAAA,EAAAV,aAAAU,YAAAA,EAAAS,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAX,GAAAA,EAAAA,EAAAV,aAAAU,YAAAA,EAAAS,OAAAT,YAAAA,EAAAU,MAAAA,CAAA,CAAA,YAAAR,EAAAZ,WAAA,CAAA,GAAAY,EAAAZ,WAAAmB,KAAA,CAAA,IAAAP,EAAAA,EAAAZ,aAAAY,YAAAA,EAAAO,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAT,GAAAA,EAAAA,EAAAZ,aAAAY,YAAAA,EAAAO,OAAAP,YAAAA,EAAAQ,MAAAA,CAAA,CAAA,YAAAP,EAAAb,WAAA,CAAA,GAAAa,EAAAb,WAAAmB,KAAA,CAAA,IAAAN,EAAAA,EAAAb,aAAAa,YAAAA,EAAAM,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAR,GAAAA,EAAAA,EAAAb,aAAAa,YAAAA,EAAAM,OAAAN,YAAAA,EAAAO,MAAAA,CAAA,CAAA,YAAAN,EAAAd,WAAA,CAAA,GAAAc,EAAAd,WAAAmB,KAAA,CAAA,IAAAL,EAAAA,EAAAd,aAAAc,YAAAA,EAAAK,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAP,GAAAA,EAAAA,EAAAd,aAAAc,YAAAA,EAAAK,OAAAL,YAAAA,EAAAM,MAAAA,CAAA,CAAA,YAAAL,EAAAf,WAAA,CAAA,GAAAe,EAAAf,WAAAmB,KAAA,CAAA,IAAAJ,EAAAA,EAAAf,aAAAe,YAAAA,EAAAI,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAN,GAAAA,EAAAA,EAAAf,aAAAe,YAAAA,EAAAI,OAAAJ,YAAAA,EAAAK,MAAAA,CAAA,CAAA,YAAAJ,EAAAhB,WAAA,CAAA,GAAAgB,EAAAhB,WAAAmB,KAAA,CAAA,IAAAH,EAAAA,EAAAhB,aAAAgB,YAAAA,EAAAG,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAL,GAAAA,EAAAA,EAAAhB,aAAAgB,YAAAA,EAAAG,OAAAH,YAAAA,EAAAI,MAAAA,CAAA,CAAA,aAAAH,EAAAjB,WAAA,CAAA,GAAAiB,EAAAjB,WAAAmB,KAAA,CAAA,IAAAF,EAAAA,EAAAjB,aAAAiB,YAAAA,EAAAE,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAJ,IAAAA,EAAAA,EAAAjB,aAAAiB,YAAAA,EAAAE,OAAAF,YAAAA,GAAAG,MAAAA,CAAA,CAAA,eAAAF,EAAAlB,WAAA,CAAA,GAAAkB,EAAAlB,WAAAmB,KAAA,CAAA,IAAAD,GAAAA,EAAAlB,aAAAkB,YAAAA,GAAAC,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAH,IAAAA,GAAAA,EAAAlB,aAAAkB,YAAAA,GAAAC,OAAAD,YAAAA,GAAAE,MAAAA,CAAA,CAAA"}